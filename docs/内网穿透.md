# 将 Next.js 服务暴露到外网（内网穿透）

先确保开发服务已启动并监听所有网卡：

```bash
pnpm dev
# 或使用 webpack 模式：pnpm dev:webpack
```

然后在**另一个终端**任选一种方式暴露到外网。

---

## 方式一：local tunnel（无需安装，推荐先试）

无需注册，一条命令即可获得公网链接：

```bash
npx localtunnel --port 3000
```

终端会输出类似：`your url is: https://xxx-xxx-xxx.loca.lt`  
用浏览器打开该链接即可从外网访问（首次可能需点击页面上的 “Click to Continue”）。

---

## 方式二：ngrok（稳定、需注册）

1. 安装：<https://ngrok.com/download>  
2. 注册并配置 authtoken：<https://dashboard.ngrok.com/get-started/your-authtoken>  
3. 运行：

```bash
ngrok http 3000
```

会得到 `https://xxxx.ngrok-free.app` 等地址，可直接分享。

---

## 方式三：Cloudflare Tunnel（免费、无需暴露公网 IP）

1. 安装 cloudflared：<https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/installation/>  
2. 快速隧道（无需登录）：

```bash
cloudflared tunnel --url http://127.0.0.1:3000
```

会输出 `https://xxx.trycloudflare.com`，从外网访问即可。

---

## 注意

- 穿透的是 **当前本机的 3000 端口**，请确保 Next 已在该端口运行。  
- 聊天室等实时功能依赖 SSE/WebSocket，上述隧道一般可正常使用；若遇问题可尝试换一种工具。  
- 临时隧道链接每次重启会变；ngrok 付费或 Cloudflare 自定义域名可固定域名。
